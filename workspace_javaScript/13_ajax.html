<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        window.addEventListener("load", function () {

            document.querySelector("#btn").addEventListener('click', function () {

                doAjax();
            });
            document.querySelector("#btn2").addEventListener('click', function () {

                doAjaxDaum();
                //btn2가 클릭되면 doAjax다음 함수 실행 
            });
        });

        function doAjax() {
            //ajax 객체 생성 
            let xhr = new XMLHttpRequest();

            //보낼준비
            xhr.open('get', 'https://jsonplaceholder.typicode.com/users');

            //보내기 (단, 언제 끝날지 모름)
            xhr.send();

            //다녀온 후 (응답 이후)
            xhr.onload = function () {
                console.log("다녀왔습니다");

                //받아온 내용이 저장되는 변수
                let text = xhr.responseText; //load 이벤트가 발생했을 때 내가 꺼내보는 것
                console.log(text);

                // 받아온 내용이 글씨니까 
                // 글씨를 json 객체로 변경 
                let data = JSON.parse(text);
                console.log(data);

                console.log(data[0].username); //Bret 
            }
        }
        function doAjaxDaum() {
            //ajax 객체 생성 
            let xhr = new XMLHttpRequest();

            //보낼준비
            xhr.open('get', 'https://poiemaweb.com/js-ajax');

            //보내기 (단, 언제 끝날지 모름)
            xhr.send();

            //다녀온 후 (응답 이후)
            xhr.onload = function () {
                console.log("다녀왔습니다");

                //받아온 내용이 저장되는 변수
                let text = xhr.responseText; //load 이벤트가 발생했을 때 내가 꺼내보는 것
                console.log(text);

                //html로된 글씨를 받아온 경우 
                // dom으로 바꿔서 필요한 정보를 얻어보자 
               let doc = new DOMParser().parseFromString(text, 'text/html');
               let html = doc.getElementById("32-ajax-response").innerHTML;
               console.log(html);
               
            }
        }
    </script>
</head>

<body>
    <button type="button" id="btn">ajax 실행</button><br>
    <button type="button" id="btn2">daum.net</button>
</body>

</html>